function blanko_action(a=1){let t=$("#asuransi").val(),l=$("#number_search").val(),n=(a-1)*10;$(".data-nav").attr("disabled",!0),$("#halaman").html(a),$("#loading").fadeIn(function(){setTimeout(()=>{get_and_fill(n,10,""==t?null:t,""==l?null:l)},100)})}function get_and_fill(a=0,t=10,l=null,n=null){let e="?limit="+t;a>0&&(e+="&offset="+a),null!=l&&(e+="&asuransi="+l),null!=n&&(e+="&nomor="+n),$.get(base_url("api/blanko"+encodeURI(e)),function(a,t){if(a.status&&"success"==t&&a.data.list.length>0){let l="";a.data.list.forEach(a=>{l+=table_row(a.id,a.asuransi,a.nomor)}),$("#blanko_list").addClass("table-responsive p-0").html(table_body(l)),$("#count_data").html(formating_number(a.data.count)),set_page(a.data.count),$("#loading").fadeOut()}else failed_load("Tidak ada data","far fa-file")}).fail(function(){failed_load("Gagal memuat data")})}function table_body(a=""){let t='<table class="table table-hover text-nowrap">';return t+='<thead><tr><th>Asuransi</th><th class="text-center">Nomor Blanko</th>',t+='<th class="text-center"><i class="fas fa-cog"></i></th>',t+="</tr></thead><tbody>"+a+"</tbody></table>"}function table_row(a="",t="",l=""){let n="<tr><td>"+t+"</td>";return n+='<td class="text-center">'+l+"</td>",n+='<td class="text-center py-0 align-middle">',n+='<a href="'+base_url("process/used/"+a)+'" class="btn btn-default btn-sm text-bold">',n+='Gunakan<i class="fas fa-share ml-2"></i></a>',n+="</td></tr>"}function set_page(a=0,t=10){let l=parseInt($("#halaman").html()),n=Math.floor(a/t)+(a%t==0?0:1);$("#halaman_max").html(0===a?1:n),l<n&&($('button[data-page="next"]').attr("disabled",!1),$('button[data-page="last"]').attr("disabled",!1)),l>1&&($('button[data-page="prev"]').attr("disabled",!1),$('button[data-page="first"]').attr("disabled",!1))}function failed_load(a="",t="fas fa-exclamation-triangle"){let l='<div class="text-secondary d-flex justify-content-center" style="min-height:30vh">';l+='<div class="text-center my-auto"><i class="'+t+' fa-3x"></i>',l+='<p class="mt-3 mb-0">'+a+"</p></div></div>",$("#blanko_list").removeClass("table-responsive p-0").html(l),$("#halaman_max").html("1"),$("#count_data").html("0"),$("#loading").fadeOut()}$(function(){$("#loading").fadeOut(100,function(){$(this).html('<i class="fas fa-2x fa-spinner fa-pulse text-secondary"></i>'),setTimeout(()=>{$(this).fadeIn(function(){get_and_fill()})},100)}),$("#asuransi").change(function(){blanko_action()}),$("#btn_search").click(function(){$("#number_search").val($("#blanko_number").val()),blanko_action()}),$(".data-nav").click(function(){let a=$(this).data("page"),t=parseInt($("#halaman").html()),l=parseInt($("#halaman_max").html());switch(a){case"first":default:blanko_action();break;case"last":blanko_action(l);break;case"prev":blanko_action(t-1);break;case"next":blanko_action(t+1)}}),$(".clear-filter").click(function(){let a=$(this).data("clear").split(",");$.each(a,function(a,t){$("#"+t).val("")}),blanko_action()})});
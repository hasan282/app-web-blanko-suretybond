const idstatus="undefined"==typeof statusblanko?"":statusblanko;function blanko_action(a=1){const t=$("#asuransi").val(),n=$("#number_search").val(),e=10*(a-1);$(".data-nav").attr("disabled",!0),$("#halaman").html(a),$("#loading").fadeIn((function(){setTimeout((()=>{get_and_fill(e,10,""==t?null:t,""==n?null:n)}),50)}))}function get_and_fill(a=0,t=10,n=null,e=null){let l="?limit="+t;a>0&&(l+="&offset="+a),null!=n&&(l+="&asuransi="+n),null!=e&&(l+="&nomor="+e),$.get(base_url("api/blanko/"+idstatus+encodeURI(l)),(function(a,t){if(a.status&&"success"==t&&a.data.list.length>0){let t="";a.data.list.forEach((a=>{t+=table_row(a.id,a.asuransi,a.prefix,a.nomor)})),$("#blanko_list").addClass("table-responsive p-0").html(table_body(t)),$("#count_data").html(formating_number(a.data.count)),set_page(a.data.count),$("#loading").fadeOut()}else failed_load("Tidak ada data","far fa-file")})).fail((function(){failed_load("Gagal memuat data")}))}function table_body(a=""){let t='<table class="table table-hover text-nowrap">';return t+='<thead><tr><th>Asuransi</th><th class="text-center">Nomor Blanko</th>',t+='<th class="text-center"><i class="fas fa-cog"></i></th>',t+="</tr></thead><tbody>"+a+"</tbody></table>",t}function table_row(a="",t="",n="",e=""){let l="<tr><td>"+t+'</td><td class="text-center">';return l+='<span class="text-secondary">'+(null===n?"":n)+"</span><b>"+e+"</b></td>",l+='<td class="text-center py-0 align-middle">',l+=set_action_button(a,idstatus),l+="</td></tr>",l}function set_page(a=0,t=10){const n=parseInt($("#halaman").html()),e=Math.floor(a/t)+(a%t==0?0:1);$("#halaman_max").html(0===a?1:e),n<e&&($('button[data-page="next"]').attr("disabled",!1),$('button[data-page="last"]').attr("disabled",!1)),n>1&&($('button[data-page="prev"]').attr("disabled",!1),$('button[data-page="first"]').attr("disabled",!1))}function failed_load(a="",t="fas fa-exclamation-triangle"){let n='<div class="text-secondary d-flex justify-content-center" style="min-height:30vh">';n+='<div class="text-center my-auto"><i class="'+t+' fa-3x"></i>',n+='<p class="mt-3 mb-0">'+a+"</p></div></div>",$("#blanko_list").removeClass("table-responsive p-0").html(n),$("#halaman_max").html("1"),$("#count_data").html("0"),$("#loading").fadeOut()}function set_action_button(a,t="1"){return parseInt(t)>1?'<a href="'+base_url("blanko/detail/"+a)+'" class="btn btn-info btn-sm text-bold">Lihat Detail<i class="fas fa-info-circle ml-2"></i></a>':'<a href="'+base_url("process/used/"+a)+'" class="btn btn-default btn-sm text-bold">Gunakan<i class="fas fa-share ml-2"></i></a>'}$((function(){$("#loading").fadeOut(100,(function(){$(this).html('<i class="fas fa-2x fa-spinner fa-pulse text-secondary"></i>'),setTimeout((()=>{$(this).fadeIn((function(){get_and_fill()}))}),100)})),$("#asuransi").change((function(){blanko_action()})),$("#btn_search").click((function(){$("#number_search").val($("#blanko_number").val()),blanko_action()})),$(".data-nav").click((function(){const a=$(this).data("page"),t=parseInt($("#halaman").html()),n=parseInt($("#halaman_max").html());switch(a){case"first":default:blanko_action();break;case"last":blanko_action(n);break;case"prev":blanko_action(t-1);break;case"next":blanko_action(t+1)}})),$(".clear-filter").click((function(){const a=$(this).data("clear").split(",");$.each(a,(function(a,t){$("#"+t).val("")})),blanko_action()}))}));
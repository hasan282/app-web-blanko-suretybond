let table_options={url:base_url("api/blanko/1"),query:"",id_loader:"loading",loader_class:"fas fa-2x fa-spinner fa-pulse text-secondary",loader_timeout:100,id_table:"blanko_list",show_count:!0,id_count:"count_data",show_page:!0,id_page_now:"halaman",id_page_max:"halaman_max",pagination:!0,limit:10,offset:0,failed_message:"Tidak ada data",failed_icon:"far fa-file",navigator_class:"data-nav",navigator_data:"page",case_prev:"prev",case_next:"next",case_first:"first",case_last:"last",table_header:[{title:"Asuransi",center:!1},{title:"Nomor Blanko",center:!0}],table_row:'<td>$asuransi</td><td class="text-center"><span class="text-secondary">$prefix</span><b>$nomor</b></td>',option_field:!0,option_icon:"fas fa-cog",option_button:'<a href="'+base_url("process/used/$id")+'" class="btn btn-default btn-sm text-bold">Gunakan<i class="fas fa-share ml-2"></i></a>'};function table_setup(t={}){for(const a in t)table_options[a]=t[a];$("#"+table_options.id_loader).fadeOut(table_options.loader_timeout,(function(){$(this).html('<i class="'+table_options.loader_class+'"></i>'),setTimeout((()=>{$(this).fadeIn((function(){table_fill()}))}),table_options.loader_timeout)})),$("."+table_options.navigator_class).click((function(){const t=$(this).data(table_options.navigator_data),a=parseInt($("#"+table_options.id_page_now).html()),e=parseInt($("#"+table_options.id_page_max).html());switch(t){case table_options.case_first:table_change();break;case table_options.case_last:table_change(e);break;case table_options.case_prev:table_change(a-1);break;case table_options.case_next:table_change(a+1);break;default:table_change()}}))}function table_fill(){let t="?limit="+table_options.limit;table_options.offset>0&&(t+="&offset="+table_options.offset),t+=table_options.query,$.get(table_options.url+encodeURI(t),(function(t,a){if(t.status&&"success"==a&&t.data.list.length>0){let a="";t.data.list.forEach((t=>{a+=table_row(t)})),$("#"+table_options.id_table).addClass("table-responsive p-0").html(table_body(a)),$("#"+table_options.id_count).html(formating_number(t.data.count)),table_page(t.data.count),$("#"+table_options.id_loader).fadeOut()}else table_failed(table_options.failed_message,table_options.failed_icon)})).fail((function(){table_failed("Gagal memuat data")}))}function table_option(t={}){for(const a in t)table_options[a]=t[a];table_change()}function table_change(t=1){table_options.offset=(t-1)*table_options.limit,$("."+table_options.navigator_class).attr("disabled",!0),$("#"+table_options.id_page_now).html(t),$("#"+table_options.id_loader).fadeIn((function(){setTimeout((()=>{table_fill()}),table_options.loader_timeout)}))}function table_page(t=0){const a=table_options.limit,e=parseInt($("#"+table_options.id_page_now).html()),o=Math.floor(t/a)+(t%a==0?0:1);$("#"+table_options.id_page_max).html(0===t?1:o),e<o&&($('button[data-page="'+table_options.case_next+'"]').attr("disabled",!1),$('button[data-page="'+table_options.case_last+'"]').attr("disabled",!1)),e>1&&($('button[data-page="'+table_options.case_prev+'"]').attr("disabled",!1),$('button[data-page="'+table_options.case_first+'"]').attr("disabled",!1))}function table_body(t=""){let a='<table class="table table-hover text-nowrap"><thead><tr>';return table_options.table_header.forEach((t=>{a+="<th"+(t.center?' class="text-center"':"")+">"+t.title+"</th>"})),table_options.option_field&&(a+='<th class="text-center"><i class="'+table_options.option_icon+'"></i></th>'),a+="</tr></thead><tbody>"+t+"</tbody></table>",a}function table_row(t={}){let a=table_options.table_row;table_options.option_field&&(a+='<td class="text-center py-0 align-middle">'+table_options.option_button+"</td>");for(const e in t){const o=new RegExp("\\$"+e,"g"),l=null===t[e]?"":t[e];a=a.replace(o,l)}return"<tr>"+a+"</tr>"}function table_failed(t="",a="fas fa-exclamation-triangle"){let e='<div class="text-secondary d-flex justify-content-center" style="min-height:30vh">';e+='<div class="text-center my-auto"><i class="'+a+' fa-3x"></i>',e+='<p class="mt-3 mb-0">'+t+"</p></div></div>",$("#"+table_options.id_table).removeClass("table-responsive p-0").html(e),$("#"+table_options.id_page_max).html("1"),$("#"+table_options.id_count).html("0"),$("#"+table_options.id_loader).fadeOut()}